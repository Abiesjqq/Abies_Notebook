## Exceptions

`throw`表示抛异常。在抛异常处，函数终止不再执行，将异常存到内存中，将该函数出栈（调用析构函数），检查是否有try block，如果没有进一步处理则自动向上传；如果有则执行catch中内容。如果`catch`中接到异常但没完全处理，可用`throw;`再抛出去。

不同catch按从上到下依次尝试匹配。每次匹配中，先尝试完全匹配，再尝试基类向上造型，最后尝试`catch (...)`通配。需要将基类和通配写在最后。

`noexcept`关键字表示事先声明该函数不会抛异常。如果实际运行时抛异常（该函数出错，或异常向上传递到该函数），说明出现意料之外的严重错误，程序直接终止。

构造函数中异常时，栈初始化在出栈时自动回收内存，堆初始化由于异常没有完成构造，也会自动回收内存。但如果构造抛异常时已经有构造好的原生指针，由于析构函数未执行，这些指针的内存不会回收，导致内存泄漏。一种方法是将原生指针另外封装为类，利用对象的析构函数回收内存。

析构函数中不能抛异常。



